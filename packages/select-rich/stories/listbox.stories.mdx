import { Story, Meta, html, Preview } from '@open-wc/demoing-storybook';
import { loadDefaultFeedbackMessages, Required } from '@lion/validate';
import { listboxData } from './listboxData.js';
import '@lion/option/lion-option.js';
import '../lion-listbox.js';

<Meta title="Forms/Listbox" parameters={{ component: 'lion-listbox' }} />


# Listbox

A listbox widget presents a list of options and allows a user to select one or more of them.
A listbox that allows a single option to be chosen is a single-select listbox; one that allows
multiple options to be selected is a multi-select listbox.

> From https://www.w3.org/TR/wai-aria-practices/#Listbox

<Preview>
  <Story name="Listbox">
    {html`
      <lion-listbox name="listbox" label="Default">
        <lion-option value="Apple">Apple</lion-option>
        <lion-option value="Artichoke">Artichoke</lion-option>
        <lion-option value="Asparagus">Asparagus</lion-option>
        <lion-option value="Banana">Banana</lion-option>
        <lion-option value="Beets">Beets</lion-option>
      </lion-listbox>
    `}
  </Story>
</Preview>

## Multiple choice

Add `multiple-choice` flag to allow multiple values to be selected.
This will:

- keep the listbox overlay open on click of an option
- display a list of selected option representations next to the text box
- make the value of type `Array` instead of `String`

<Preview>
  <Story name="Multiple choice">
    {html`
      <lion-listbox name="combo" label="Multiple" multiple-choice>
        <lion-option value="Apple">Apple</lion-option>
        <lion-option value="Artichoke">Artichoke</lion-option>
        <lion-option value="Asparagus">Asparagus</lion-option>
        <lion-option value="Banana">Banana</lion-option>
        <lion-option value="Beets">Beets</lion-option>
        <lion-option value="Bell pepper">Bell pepper</lion-option>
        <lion-option value="Broccoli">Broccoli</lion-option>
        <lion-option value="Brussels sprout">Brussels sprout</lion-option>
        <lion-option value="Cabbage">Cabbage</lion-option>
        <lion-option value="Carrot">Carrot</lion-option>
      </lion-listbox>
    `}
  </Story>
</Preview>

## Orientation

When `orientation="horizontal"`, left and right arrow keys will be enabled, plus the screenreader
will be informed about the direction of the options.
By default, `orientation="horizontal"` is set, which enables up and down arrow keys.

<Preview>
  <Story name="Orientation">
    {html`
      <lion-listbox name="combo" label="Orientation horizontal" orientation="horizontal">
        <lion-option value="Apple">Apple</lion-option>
        <lion-option value="Artichoke">Artichoke</lion-option>
        <lion-option value="Asparagus">Asparagus</lion-option>
        <lion-option value="Banana">Banana</lion-option>
        <lion-option value="Beets">Beets</lion-option>
        <lion-option value="Bell pepper">Bell pepper</lion-option>
        <lion-option value="Broccoli">Broccoli</lion-option>
        <lion-option value="Brussels sprout">Brussels sprout</lion-option>
        <lion-option value="Cabbage">Cabbage</lion-option>
        <lion-option value="Carrot">Carrot</lion-option>
      </lion-listbox>
    `}
  </Story>
</Preview>

With `multiple-choice` flag configured, multiple options can be checked.

<Preview>
  <Story name="Orientation horizontal multiple">
    {html`
      <lion-listbox
        name="combo"
        label="Orientation horizontal multiple"
        orientation="horizontal"
        multiple-choice
      >
        <lion-option value="Apple">Apple</lion-option>
        <lion-option value="Artichoke">Artichoke</lion-option>
        <lion-option value="Asparagus">Asparagus</lion-option>
        <lion-option value="Banana">Banana</lion-option>
        <lion-option value="Beets">Beets</lion-option>
        <lion-option value="Bell pepper">Bell pepper</lion-option>
        <lion-option value="Broccoli">Broccoli</lion-option>
        <lion-option value="Brussels sprout">Brussels sprout</lion-option>
        <lion-option value="Cabbage">Cabbage</lion-option>
        <lion-option value="Carrot">Carrot</lion-option>
      </lion-listbox>
    `}
  </Story>
</Preview>


## Selection-follows-focus

When true, will synchronize activedescendant and selected element on arrow key navigation.
This behavior can usually be seen in `<select>` on the Windows platform.
Note that this behavior cannot be used when multiple-choice is true.
See [wai aria spec](https://www.w3.org/TR/wai-aria-practices/#kbd_selection_follows_focus)

<Preview>
  <Story name="selectionFollowsFocus">
    {html`
      <lion-listbox name="combo" label="Selection follows focus" selection-follows-focus>
        <lion-option value="Apple">Apple</lion-option>
        <lion-option value="Artichoke">Artichoke</lion-option>
        <lion-option value="Asparagus">Asparagus</lion-option>
        <lion-option value="Banana">Banana</lion-option>
        <lion-option value="Beets">Beets</lion-option>
        <lion-option value="Bell pepper">Bell pepper</lion-option>
        <lion-option value="Broccoli">Broccoli</lion-option>
        <lion-option value="Brussels sprout">Brussels sprout</lion-option>
        <lion-option value="Cabbage">Cabbage</lion-option>
        <lion-option value="Carrot">Carrot</lion-option>
      </lion-listbox>
    `}
  </Story>
</Preview>

## Rotate keyboard navigation

Will give first option active state when navigated to the next option from last option.

<Preview>
  <Story name="rotateKeyboardNavigation">
    {html`
      <lion-listbox name="combo" label="Rotate keyboard navigation" rotate-keyboard-navigation>
        <lion-option value="Apple">Apple</lion-option>
        <lion-option value="Artichoke">Artichoke</lion-option>
        <lion-option value="Asparagus">Asparagus</lion-option>
        <lion-option value="Banana">Banana</lion-option>
        <lion-option value="Beets">Beets</lion-option>
        <lion-option value="Bell pepper">Bell pepper</lion-option>
        <lion-option value="Broccoli">Broccoli</lion-option>
        <lion-option value="Brussels sprout">Brussels sprout</lion-option>
        <lion-option value="Cabbage">Cabbage</lion-option>
        <lion-option value="Carrot">Carrot</lion-option>
      </lion-listbox>
    `}
  </Story>
</Preview>
